<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    
</body>
</html>
<script>
// <!-- LLD:Low level Design -->

class Vehicle{
    constructor(type,regNumber,color){
        this.type=type;
        this.regNumber=regNumber;
        this.color=color;
    }

    get type(){
        return this.type;
    }

    set type(value){
        this._type=value;
    }
}

// let v1=new Vehicle("car","DL-12345","Black")

// console.log(v1);

// CAR
class Car extends Vehicle{
    constructor(regNumber,color){
        super("car",regNumber,color)
    }
}

// let c1= new Car("DL-12345","Red")
// console.log(c1)

// Bike

class Bike extends Vehicle{
    constructor(regNumber,color){
        super("Bike",regNumber,color)
    }
}

// let b1= new Bike("DL-12345","Black")
// console.log(b1)


// Truck

class Truck extends Vehicle{
    constructor(regNumber,color){
        super("Truck",regNumber,color)
    }
}

// let t1= new Truck("DL-12345","Blue")
// console.log(t1)

// Parking Slot

class Slot{
    constructor(type,number){
        this.number=number;
        this.type=type;
        this.isBooking=false;
    }

    get isBooked(){
        return this._isBooked;
    }
    set isBooked(value){
        this._isBooked=value
    }
}

// let s1=new Slot("Bike",0);
// s1.isBooked=true;
// console.log(s1)


// Individual Floors

class ParkingFloor{
    constructor(floorNumber,maxSpots){
        this.floorNumber=floorNumber;
        this.parkingSpots=[];

        for(let i=0;i<maxSpots;i++){
            if(i===0){
                // Push the slots
                this._parkingSpots.push(new Slot("car",i))
            }
            else if(i===1){
                // Push the slots
                this._parkingSpots.push(new Slot("bike",i))
            }
            else{
                 // Push the slots
                 this._parkingSpots.push(new Slot("truck",i))

            }
        }
    }

    get parkingSpots(){
        return this._parkingSpots;
    }
    set parkingSpots(value){
       this._parkingSpots=value;
    }
}
// let p1=new ParkingFloor(0,3);
// console.log(p1)

// parkig lot or the building

class ParkingLot{
    constructor(number){
        this._floors=[];
        this._numberOfFloors=number;

        for(let i=0;i<number;i++){
            this._floors.push(new ParkingFloor(i,3))
        }
    }

    get numberOfFloors(){
        return this._numberOfFloors;
    }
    get floors(){
        return this._floors;
    }


    parkVehicle(){
        let slot=this.findSlot(vehicle.type);

        if(slot){
            this.bookSlot(slot);
            let ticket=new Ticket(slot.floorNumber,slot.slot.number)
         console.log("Ticket",ticket)
        }
        else{
            console.log("No Slots")
            return false
        }

    }


    findSlot(){
        for(let i=0;i<this._numberOfFloors;i++){
            for(let slot of this._floors[i]._parkingSpots){
                if(slot.type == type && !slot._isBooked){
                    return {floorNumber:i,slot:slot }
                }
            }
        }
        return false;
    }
    bookSlot(slot){
        slot.slot.isBooked=true;
        console.log("Slot is Booked")
        return true;

    }
  
}


// let pl1= new ParkingLot(3)
// console.log(pl1)


class Ticket{
    constructor(floorNumber,slotNumber){
        this.floorNumber=floorNumber;
        this.slotNumber=slotNumber;
        this.issuedAT=new Date();
        // Date() is a inbuilt function which gave current date


    }
}

let b1 =new Bike("Dl-12345","Red");

let pl1=new ParkingLot(3)

pl1.parkVehicle()

// let t1=new Ticket(1,1);

// console.log(t1)

</script>
